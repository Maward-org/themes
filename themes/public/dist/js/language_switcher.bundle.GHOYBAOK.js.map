{
  "version": 3,
  "sources": ["../../../../../apps/themes/themes/public/js/language_switcher.js"],
  "sourcesContent": ["frappe.provide(\"frappe.language_switcher\");\n\nfrappe.language_switcher = {\n\tinit: function () {\n\t\t// Add language switcher icon to navbar\n\t\tthis.create_language_switcher();\n\t\tthis.bind_events();\n\t},\n\n\tcreate_language_switcher: function () {\n\t\tconst navbar_right = $(\"#navbar-breadcrumbs + .navbar-collapse .navbar-nav\");\n\t\tconst language_switcher = $(`\n            <li class=\"nav-item dropdown dropdown-help dropdown-mobile d-none d-lg-block\">\n                <button class=\"btn-reset nav-link\" data-toggle=\"dropdown\" aria-controls=\"language_dropdown\" aria-label=\"Language Dropdown\" aria-expanded=\"false\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"#857d7d\" stroke-width=\"1\" stroke-linecap=\"round\" stroke-linejoin=\"round\" data-lucide=\"languages\" class=\"lucide lucide-languages stroke-[1] h-[15px] w-[15px]\"><path d=\"m5 8 6 6\"></path><path d=\"m4 14 6-6 2-3\"></path><path d=\"M2 5h12\"></path><path d=\"M7 2h1\"></path><path d=\"m22 22-5-10-5 10\"></path><path d=\"M14 18h6\"></path></svg>   \n                </button>       \n            \n                <div class=\"dropdown-menu dropdown-menu-right\" id=\"languages_dropdown\" role=\"menu\">        \n               \n                </div>\n            </li>\n        `);\n\n\t\tnavbar_right.prepend(language_switcher);\n\n\t\t// Fetch and populate languages\n\t\tthis.populate_languages();\n\t},\n\n\tpopulate_languages: async function () {\n\t\tawait frappe.call({\n\t\t\tmethod: \"frappe.client.get_list\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Language\",\n\t\t\t\tfilters: {\n\t\t\t\t\tcustom_show_in_language_switcher: 1,\n\t\t\t\t},\n\t\t\t\tfields: [\"name\", \"language_name\"],\n\t\t\t},\n\t\t\tcallback: (response) => {\n\t\t\t\tconst languages = response.message || [];\n\t\t\t\tconst dropdown_content = $(\"#languages_dropdown\");\n\n\t\t\t\tfor (const lang of languages) {\n\t\t\t\t\tconst lang_item = $(`\n                        <a class=\"dropdown-item language-switcher\" href=\"javascript:;\" data-lang_code=\"${lang.name}\">\n                            ${lang.language_name}\n                        </a>\n                    `);\n\n\t\t\t\t\tdropdown_content.prepend(lang_item);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t},\n\n\tbind_events: function () {\n\t\tconst me = this;\n\n\t\t// Handle language selection\n\t\t$(document).on(\"click\", \".language-switcher\", function () {\n\t\t\tconst lang_code = $(this).data(\"lang_code\");\n\t\t\tme.change_language(lang_code);\n\t\t});\n\t},\n\n\tchange_language: async (lang_code) => {\n\t\ttry {\n\t\t\t// Update the user's default language\n\t\t\tconst userResponse = await frappe.call({\n\t\t\t\tmethod: \"frappe.client.set_value\",\n\t\t\t\targs: {\n\t\t\t\t\tdoctype: \"User\",\n\t\t\t\t\tname: frappe.session.user,\n\t\t\t\t\tfieldname: \"language\",\n\t\t\t\t\tvalue: lang_code,\n\t\t\t\t},\n\t\t\t\tfreaze: true,\n\t\t\t\tmessage: __(\"Updating user language...\"),\n\t\t\t});\n\n\t\t\t// Reload the page to apply the new language\n\t\t\tif (!userResponse.message) {\n\t\t\t\tfrappe.show_alert({\n\t\t\t\t\tmessage: __(\"Failed to update user language\"),\n\t\t\t\t\tindicator: \"red\",\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfrappe.show_alert({\n\t\t\t\tmessage: __(\"User language updated successfully.\"),\n\t\t\t\tindicator: \"green\",\n\t\t\t});\n\n\t\t\tfrappe.ui.toolbar.clear_cache();\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Error changing language:\", error);\n\t\t}\n\t},\n};\n\n// Initialize the language switcher when Frappe is ready\n$(document).ready(function () {\n\tfrappe.language_switcher.init();\n});"],
  "mappings": ";;AAAA,SAAO,QAAQ,0BAA0B;AAEzC,SAAO,oBAAoB;AAAA,IAC1B,MAAM,WAAY;AAEjB,WAAK,yBAAyB;AAC9B,WAAK,YAAY;AAAA,IAClB;AAAA,IAEA,0BAA0B,WAAY;AACrC,YAAM,eAAe,EAAE,oDAAoD;AAC3E,YAAM,oBAAoB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAUrB;AAEP,mBAAa,QAAQ,iBAAiB;AAGtC,WAAK,mBAAmB;AAAA,IACzB;AAAA,IAEA,oBAAoB,iBAAkB;AACrC,YAAM,OAAO,KAAK;AAAA,QACjB,QAAQ;AAAA,QACR,MAAM;AAAA,UACL,SAAS;AAAA,UACT,SAAS;AAAA,YACR,kCAAkC;AAAA,UACnC;AAAA,UACA,QAAQ,CAAC,QAAQ,eAAe;AAAA,QACjC;AAAA,QACA,UAAU,CAAC,aAAa;AACvB,gBAAM,YAAY,SAAS,WAAW,CAAC;AACvC,gBAAM,mBAAmB,EAAE,qBAAqB;AAEhD,qBAAW,QAAQ,WAAW;AAC7B,kBAAM,YAAY,EAAE;AAAA,yGACgF,KAAK;AAAA,8BAChF,KAAK;AAAA;AAAA,qBAEd;AAEhB,6BAAiB,QAAQ,SAAS;AAAA,UACnC;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAAA,IAEA,aAAa,WAAY;AACxB,YAAM,KAAK;AAGX,QAAE,QAAQ,EAAE,GAAG,SAAS,sBAAsB,WAAY;AACzD,cAAM,YAAY,EAAE,IAAI,EAAE,KAAK,WAAW;AAC1C,WAAG,gBAAgB,SAAS;AAAA,MAC7B,CAAC;AAAA,IACF;AAAA,IAEA,iBAAiB,OAAO,cAAc;AACrC,UAAI;AAEH,cAAM,eAAe,MAAM,OAAO,KAAK;AAAA,UACtC,QAAQ;AAAA,UACR,MAAM;AAAA,YACL,SAAS;AAAA,YACT,MAAM,OAAO,QAAQ;AAAA,YACrB,WAAW;AAAA,YACX,OAAO;AAAA,UACR;AAAA,UACA,QAAQ;AAAA,UACR,SAAS,GAAG,2BAA2B;AAAA,QACxC,CAAC;AAGD,YAAI,CAAC,aAAa,SAAS;AAC1B,iBAAO,WAAW;AAAA,YACjB,SAAS,GAAG,gCAAgC;AAAA,YAC5C,WAAW;AAAA,UACZ,CAAC;AACD;AAAA,QACD;AAEA,eAAO,WAAW;AAAA,UACjB,SAAS,GAAG,qCAAqC;AAAA,UACjD,WAAW;AAAA,QACZ,CAAC;AAED,eAAO,GAAG,QAAQ,YAAY;AAAA,MAC/B,SAAS,OAAP;AACD,gBAAQ,MAAM,4BAA4B,KAAK;AAAA,MAChD;AAAA,IACD;AAAA,EACD;AAGA,IAAE,QAAQ,EAAE,MAAM,WAAY;AAC7B,WAAO,kBAAkB,KAAK;AAAA,EAC/B,CAAC;",
  "names": []
}
